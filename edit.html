<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dhumketu Admin | Edit Content</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; background: #0f172a; color: #f1f5f9; }
        .input-box { background: #1e293b; border: 1px solid #334155; padding: 12px; border-radius: 12px; width: 100%; color: white; margin-bottom: 1rem; outline: none; }
        .input-box:focus { border-color: #3b82f6; }
        .content-type-btn { padding: 10px 20px; border-radius: 10px; cursor: pointer; transition: all 0.3s; }
        .content-type-btn.active { background: #3b82f6; color: white; }
        .mcq-option { display: flex; gap: 10px; align-items: center; margin-bottom: 8px; }
        .question-item { background: #1e293b; padding: 20px; border-radius: 16px; margin-bottom: 20px; border: 1px solid #334155; }
        .preview-image { max-width: 200px; border-radius: 10px; margin-top: 10px; }
    </style>
</head>
<body class="p-6 md:p-12">

    <div class="max-w-6xl mx-auto">
        <header class="flex justify-between items-center mb-12">
            <div>
                <h1 class="text-3xl font-black text-blue-500 italic">DHUMKETU CONTENT EDITOR</h1>
                <p class="text-slate-400 mt-2">Edit any content: Posts, MCQ Sets, Videos, PDFs</p>
            </div>
            <div class="flex gap-4">
                <button onclick="window.location.href='admin.html'" class="bg-slate-800 px-6 py-2 rounded-xl text-sm font-bold hover:bg-slate-700">‚Üê Admin Home</button>
                <button onclick="window.location.href='index.html'" class="bg-green-600 px-6 py-2 rounded-xl text-sm font-bold hover:bg-green-700">View Site</button>
            </div>
        </header>

        <!-- Content Type Selection -->
        <div class="bg-slate-800 p-6 rounded-2xl mb-8">
            <h2 class="text-xl font-bold mb-4 text-yellow-400">‡ßß. ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <div class="flex flex-wrap gap-3">
                <div onclick="selectType('all')" class="content-type-btn active bg-blue-600">‡¶∏‡¶¨ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü</div>
                <div onclick="selectType('post')" class="content-type-btn bg-slate-700 hover:bg-slate-600">üìù ‡¶™‡ßã‡¶∏‡ßç‡¶ü</div>
                <div onclick="selectType('mcq_set')" class="content-type-btn bg-slate-700 hover:bg-slate-600">üìö MCQ ‡¶∏‡ßá‡¶ü</div>
                <div onclick="selectType('mcq')" class="content-type-btn bg-slate-700 hover:bg-slate-600">‚ùì ‡¶∏‡¶ø‡¶ô‡ßç‡¶ó‡ßá‡¶≤ MCQ</div>
                <div onclick="selectType('video')" class="content-type-btn bg-slate-700 hover:bg-slate-600">üé• ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</div>
                <div onclick="selectType('pdf')" class="content-type-btn bg-slate-700 hover:bg-slate-600">üìÑ PDF</div>
                <div onclick="selectType('image')" class="content-type-btn bg-slate-700 hover:bg-slate-600">üñºÔ∏è ‡¶á‡¶Æ‡ßá‡¶ú</div>
            </div>
        </div>

        <!-- Search and Filter -->
        <div class="bg-slate-800 p-6 rounded-2xl mb-8">
            <h2 class="text-xl font-bold mb-4 text-purple-400">‡ß®. ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <input type="text" id="searchTitle" placeholder="‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®..." class="input-box">
                <input type="text" id="searchPath" placeholder="‡¶™‡¶æ‡¶• ‡¶¶‡¶ø‡ßü‡ßá ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö (contents/...)" class="input-box">
                <button onclick="searchContent()" class="bg-indigo-600 p-3 rounded-xl font-bold hover:bg-indigo-700">üîç ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
            <button onclick="loadAllContent()" class="bg-green-600 p-3 rounded-xl font-bold hover:bg-green-700 w-full">üîÑ ‡¶∏‡¶¨ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </div>

        <!-- Content List -->
        <div id="content-list" class="space-y-4 mb-12">
            <div class="text-center p-10 text-slate-400">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
                <p>‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
            </div>
        </div>

        <!-- Edit Form (Hidden by default) -->
        <div id="edit-form-container" class="hidden">
            <div class="bg-slate-800 p-8 rounded-2xl border border-slate-700 mb-12">
                <h2 class="text-2xl font-bold mb-6 text-green-400 flex items-center gap-3">
                    <span>‚úèÔ∏è ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                    <span id="current-edit-id" class="text-sm bg-slate-700 px-3 py-1 rounded-full"></span>
                </h2>
                
                <!-- Basic Info -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">‡¶Æ‡ßå‡¶≤‡¶ø‡¶ï ‡¶§‡¶•‡ßç‡¶Ø</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-slate-300 mb-2">‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ü‡¶æ‡¶á‡¶™</label>
                            <select id="edit-type" class="input-box" onchange="toggleEditFields()">
                                <option value="post">üìù ‡¶™‡ßã‡¶∏‡ßç‡¶ü</option>
                                <option value="mcq_set">üìö MCQ ‡¶∏‡ßá‡¶ü</option>
                                <option value="mcq">‚ùì ‡¶∏‡¶ø‡¶ô‡ßç‡¶ó‡ßá‡¶≤ MCQ</option>
                                <option value="video">üé• ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì</option>
                                <option value="pdf">üìÑ PDF</option>
                                <option value="image">üñºÔ∏è ‡¶á‡¶Æ‡ßá‡¶ú</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-300 mb-2">‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏ ‡¶™‡¶æ‡¶•</label>
                            <input id="edit-path" type="text" class="input-box" placeholder="contents/folder/subfolder">
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm text-slate-300 mb-2">‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤</label>
                        <input id="edit-title" type="text" class="input-box" placeholder="‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤">
                    </div>
                </div>

                <!-- Post Fields -->
                <div id="edit-post-fields" class="hidden mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü</h3>
                    <textarea id="edit-body" rows="6" placeholder="‡¶™‡ßã‡¶∏‡ßç‡¶ü‡ßá‡¶∞ ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§ ‡¶≤‡ßá‡¶ñ‡¶æ..." class="input-box"></textarea>
                    <textarea id="edit-json" rows="4" placeholder="JSON ‡¶ï‡ßã‡¶° (‡¶Ø‡¶¶‡¶ø ‡¶•‡¶æ‡¶ï‡ßá)..." class="input-box font-mono text-xs mt-4"></textarea>
                </div>

                <!-- Video/PDF Fields -->
                <div id="edit-media-fields" class="hidden mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">‡¶Æ‡¶ø‡¶°‡¶ø‡ßü‡¶æ ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï</h3>
                    <input id="edit-url" type="text" class="input-box" placeholder="YouTube/Drive/Direct ‡¶≤‡¶ø‡¶ô‡ßç‡¶ï">
                </div>

                <!-- Single MCQ Fields -->
                <div id="edit-mcq-fields" class="hidden mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">‡¶∏‡¶ø‡¶ô‡ßç‡¶ó‡ßá‡¶≤ MCQ</h3>
                    <textarea id="edit-mcq-question" rows="3" placeholder="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." class="input-box mb-4"></textarea>
                    
                    <div class="grid grid-cols-2 gap-4 mb-4">
                        <div class="mcq-option">
                            <span class="w-8 h-8 bg-slate-700 rounded flex items-center justify-center">A</span>
                            <input id="edit-opt-a" type="text" class="input-box flex-1" placeholder="Option A">
                        </div>
                        <div class="mcq-option">
                            <span class="w-8 h-8 bg-slate-700 rounded flex items-center justify-center">B</span>
                            <input id="edit-opt-b" type="text" class="input-box flex-1" placeholder="Option B">
                        </div>
                        <div class="mcq-option">
                            <span class="w-8 h-8 bg-slate-700 rounded flex items-center justify-center">C</span>
                            <input id="edit-opt-c" type="text" class="input-box flex-1" placeholder="Option C">
                        </div>
                        <div class="mcq-option">
                            <span class="w-8 h-8 bg-slate-700 rounded flex items-center justify-center">D</span>
                            <input id="edit-opt-d" type="text" class="input-box flex-1" placeholder="Option D">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm text-slate-300 mb-2">‡¶∏‡¶†‡¶ø‡¶ï ‡¶â‡¶§‡ßç‡¶§‡¶∞</label>
                            <select id="edit-correct-ans" class="input-box">
                                <option value="A">A</option>
                                <option value="B">B</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm text-slate-300 mb-2">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ</label>
                            <input id="edit-explanation" type="text" class="input-box" placeholder="‡¶¨‡ßç‡¶Ø‡¶æ‡¶ñ‡ßç‡¶Ø‡¶æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                        </div>
                    </div>
                </div>

                <!-- MCQ Set Fields -->
                <div id="edit-mcqset-fields" class="hidden mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">MCQ ‡¶∏‡ßá‡¶ü ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶∏‡¶Æ‡ßÇ‡¶π</h3>
                    <div id="mcqset-questions-container" class="space-y-4">
                        <!-- Questions will be added here dynamically -->
                    </div>
                    <button onclick="addNewQuestionToSet()" class="mt-4 bg-indigo-600 p-3 rounded-xl font-bold hover:bg-indigo-700 w-full">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>

                <!-- Image Upload -->
                <div class="mb-8">
                    <h3 class="text-lg font-bold mb-4 text-blue-300">‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</h3>
                    <div class="flex items-center gap-4 mb-4">
                        <input type="file" id="edit-image" accept="image/*" class="input-box">
                        <button onclick="uploadEditImage()" class="bg-purple-600 px-6 py-3 rounded-xl font-bold hover:bg-purple-700 whitespace-nowrap">‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶°</button>
                    </div>
                    <div id="edit-image-preview" class="mt-4">
                        <!-- Image preview will appear here -->
                    </div>
                    <input id="edit-image-url" type="hidden">
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4">
                    <button onclick="saveEditedContent()" class="flex-1 bg-green-600 p-4 rounded-xl font-bold hover:bg-green-700 text-lg">üíæ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡¶ó‡ßÅ‡¶≤‡ßã ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button onclick="cancelEdit()" class="flex-1 bg-red-600 p-4 rounded-xl font-bold hover:bg-red-700 text-lg">‚úñÔ∏è ‡¶¨‡¶æ‡¶§‡¶ø‡¶≤ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button onclick="deleteCurrentContent()" class="flex-1 bg-slate-700 p-4 rounded-xl font-bold hover:bg-slate-600 text-lg">üóëÔ∏è ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
            </div>
        </div>

        <!-- JSON Import for MCQ Sets -->
        <div id="json-import-section" class="bg-slate-800 p-8 rounded-2xl border border-slate-700 mt-12">
            <h2 class="text-xl font-bold mb-4 text-yellow-400">JSON ‡¶•‡ßá‡¶ï‡ßá MCQ ‡¶∏‡ßá‡¶ü ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü</h2>
            <textarea id="import-json" rows="8" placeholder="MCQ ‡¶∏‡ßá‡¶ü‡ßá‡¶∞ JSON ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®..." class="input-box font-mono text-xs"></textarea>
            <div class="flex gap-4 mt-4">
                <button onclick="importJSONToMCQSet()" class="flex-1 bg-indigo-600 p-4 rounded-xl font-bold hover:bg-indigo-700">JSON ‡¶á‡¶Æ‡ßç‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <button onclick="clearMCQSet()" class="flex-1 bg-red-600 p-4 rounded-xl font-bold hover:bg-red-700">‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶°‡¶ø‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </div>
        </div>
    </div>

    <script src="edit.js"></script>
</body>
</html>